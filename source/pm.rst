


获取物理机列表
====================

.. toctree::
   :maxdepth: 2
   :numbered:



概要
--------------------

返回当前区域项目所有物理机列表, 需要先通过身份验证获取 Token, 再带上这个 Token 去获取物理机列表。


API规范
--------------------------

获取物理机API入口与API列表如下：


    * API入口: http://m.scloudm.com/
    * API列表:

+------------------+-------------------------------+------------+--------------------------------+
|  资源            |  操作                         |  HTTP方法  |  URI路径                       |
+==================+===============================+============+================================+
|  pm              |  获取所有物理机列表           |  GET       |  /mana_api/pm                  |
+------------------+-------------------------------+------------+--------------------------------+

先认证并获取新令牌(已可用), 使用该令牌执行获取动作
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

+------------+-------------------+-----------------+
|  HTTP方法  |  URI路径          |  描述           |
+============+===================+=================+
|  GET       |  /mana_api/pm     |  获取物理机列表 |
+------------+-------------------+-----------------+

请求参数

+-----------------------+----------+---------------+
|  字段名               |  类型    |  描述         |
+=======================+==========+===============+
|  tenant_id（可选）    |  string  |  租户id       |
+-----------------------+----------+---------------+
|  region（可选）       |  string  |  所属区域     |
+-----------------------+----------+---------------+

请求样例

::


    curl  -i \
          -H 'X-Auth-Token: {token_id}' \
          -X GET 'http://m.scloudm.com/mana_api/pm?tenant_id=123456789&region=dongjing'



返回参数

+-------------------+-------------+-------------------------------------------------------------------------+
|  字段名           |  类型       |  描述                                                                   |
+===================+=============+=========================================================================+
|  pm_servers       |  dict       |  包含了所有物理机列表，每个物理的详细信息                               |
+-------------------+-------------+-------------------------------------------------------------------------+
|  asset_id         |  string     |  物理机资产编号                                                         |
+-------------------+-------------+-------------------------------------------------------------------------+
|  available        |  int        |  ilo 是否可用                                                           |
+-------------------+-------------+-------------------------------------------------------------------------+
|  cpu_num          |  int        |  cpu 核数                                                               |
+-------------------+-------------+-------------------------------------------------------------------------+
|  create_at        |  string     |  创建时间                                                               |
+-------------------+-------------+-------------------------------------------------------------------------+
|  update_at        |  string     |  更新时间                                                               |
+-------------------+-------------+-------------------------------------------------------------------------+
|  deleted          |  int        |  是否删除                                                               |
+-------------------+-------------+-------------------------------------------------------------------------+
|  disk_size        |  int        |  磁盘大小                                                               |
+-------------------+-------------+-------------------------------------------------------------------------+
|  host_name        |  string     |  主机名                                                                 |
+-------------------+-------------+-------------------------------------------------------------------------+
|  ip               |  string     |  物理机ip，逗号分割                                                     |
+-------------------+-------------+-------------------------------------------------------------------------+
|  manufacturer     |  string     |  物理机厂商                                                             |
+-------------------+-------------+-------------------------------------------------------------------------+
|  mem_size         |  int        |  物理机内存                                                             |
+-------------------+-------------+-------------------------------------------------------------------------+
|  region           |  string     |  所属区域                                                               |
+-------------------+-------------+-------------------------------------------------------------------------+
|  status           |  string     |  物理机状态                                                             |
+-------------------+-------------+-------------------------------------------------------------------------+
|  system_snid      |  string     |  系统序列号                                                             |
+-------------------+-------------+-------------------------------------------------------------------------+
|  system_type      |  string     |  物理机操作系统                                                         |
+-------------------+-------------+-------------------------------------------------------------------------+
|  tenant_id        |  string     |  项目ID                                                                 |
+-------------------+-------------+-------------------------------------------------------------------------+
|  tenant_name      |  string     |  项目名称                                                               |
+-------------------+-------------+-------------------------------------------------------------------------+


返回样例

::


        HTTP/1.0 200 OK
        Content-Type: application/json
        Content-Length: 537
        Server: Werkzeug/0.10.4 Python/2.7.5
        Date: Thu, 28 Jan 2016 05:53:28 GMT

        {
          "pm_servers": [
            {
              "asset_id": "233",
              "available": 1,
              "cpu_num": 1,
              "create_at": "2016-01-22 00:00:00",
              "deleted": 0,
              "disk_size": 213,
              "host_name": "qiuqiu.com",
              "ip": null,
              "manufacturer": null,
              "mem_size": 213,
              "region": "dongjing",
              "status": "running",
              "system_snid": "123",
              "system_type": "1",
              "tenant_id": "123456789",
              "tenant_name": "55CD55CD5aSn5L2c5oiY\n",
              "update_at": "2016-01-22 00:00:00"
            }
          ]
        }

