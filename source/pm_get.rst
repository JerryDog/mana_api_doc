


获取单台物理机信息
====================

.. toctree::
   :maxdepth: 2
   :numbered:



概要
--------------------

获取指定 snid 的单台物理机信息


API规范
--------------------------

获取物理机API入口与API列表如下：


    * API入口: http://api.scloudm.com/
    * API列表:

+------------------+-------------------------------+------------+--------------------------------+
|  资源            |  操作                         |  HTTP方法  |  URI路径                       |
+==================+===============================+============+================================+
|  pm/<snid>       |  获取单台物理机信息           |  GET       |  /mana_api/pm/<snid>           |
+------------------+-------------------------------+------------+--------------------------------+

先认证并获取新令牌(已可用), 使用该令牌执行获取动作
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

+------------+--------------------------+---------------------+
|  HTTP方法  |  URI路径                 |  描述               |
+============+==========================+=====================+
|  GET       |  /mana_api/pm/<snid>     |  获取单台物理机信息 |
+------------+--------------------------+---------------------+

请求参数

+-----------------------+----------+-----------------------------+
|  字段名               |  类型    |  描述                       |
+=======================+==========+=============================+
|  Sp-Agent             |  header  |  厂商类型如, 必须为scloudm  |
+-----------------------+----------+-----------------------------+
|  snid                 |  string  |  物理机系统序列号           |
+-----------------------+----------+-----------------------------+


请求样例

::


    curl  -i \
          -H 'X-Auth-Token: {token_id}' \
          -H 'Sp-Agent: scloudm' \
          -X GET 'http://api.scloudm.com/mana_api/pm/j435jh345'



返回参数

+-------------------+-------------+-------------------------------------------------------------------------+
|  字段名           |  类型       |  描述                                                                   |
+===================+=============+=========================================================================+
|  pm_server        |  dict       |  包含了单台物理的详细信息                                               |
+-------------------+-------------+-------------------------------------------------------------------------+
|  asset_id         |  string     |  物理机资产编号                                                         |
+-------------------+-------------+-------------------------------------------------------------------------+
|  ilo_state        |  int        |  ilo 是否可用   0,1                                                     |
+-------------------+-------------+-------------------------------------------------------------------------+
|  cpu_num          |  int        |  cpu 核数                                                               |
+-------------------+-------------+-------------------------------------------------------------------------+
|  create_at        |  string     |  创建时间                                                               |
+-------------------+-------------+-------------------------------------------------------------------------+
|  update_at        |  string     |  更新时间                                                               |
+-------------------+-------------+-------------------------------------------------------------------------+
|  state            |  string     |  物理机物理状态 removed、repaired,deleted,active                        |
+-------------------+-------------+-------------------------------------------------------------------------+
|  disk_size        |  int        |  磁盘大小                                                               |
+-------------------+-------------+-------------------------------------------------------------------------+
|  host_name        |  string     |  主机名                                                                 |
+-------------------+-------------+-------------------------------------------------------------------------+
|  ip               |  string     |  物理机ip，逗号分割                                                     |
+-------------------+-------------+-------------------------------------------------------------------------+
|  wan_ip           |  string     |  物理机外网ip，逗号分割                                                 |
+-------------------+-------------+-------------------------------------------------------------------------+
|  lan_ip           |  string     |  物理机内网ip，逗号分割                                                 |
+-------------------+-------------+-------------------------------------------------------------------------+
|  manufacturer     |  string     |  物理机厂商                                                             |
+-------------------+-------------+-------------------------------------------------------------------------+
|  mem_size         |  int        |  物理机内存                                                             |
+-------------------+-------------+-------------------------------------------------------------------------+
|  region           |  string     |  所属区域                                                               |
+-------------------+-------------+-------------------------------------------------------------------------+
|  status           |  string     |  物理机状态 ('starting','running','stopping','stop')                    |
+-------------------+-------------+-------------------------------------------------------------------------+
|  snid             |  string     |  系统序列号                                                             |
+-------------------+-------------+-------------------------------------------------------------------------+
|  os_type          |  string     |  物理机操作系统                                                         |
+-------------------+-------------+-------------------------------------------------------------------------+
|  tenant_id        |  string     |  项目ID                                                                 |
+-------------------+-------------+-------------------------------------------------------------------------+



返回样例

::


         HTTP/1.0 200 OK
         Content-Type: application/json
         Content-Length: 523
         Server: Werkzeug/0.10.4 Python/2.7.5
         Date: Fri, 01 Apr 2016 04:38:24 GMT

         {
           "code": 200,
           "msg": "",
           "pm_server": {
             "asset_id": "6test1234567",
             "cpu_num": 4,
             "create_at": "2016-03-31 15:45:00",
             "disk_size": 1000,
             "host_name": "qiuqiu.com",
             "ilo_state": 0,
             "ip": "192.168.0.2",
             "wan_ip": "222.73.193.33",
             "lan_ip": "192.168.0.2",
             "manufacturer": "qiuqiu",
             "mem_size": 8,
             "os_type": "windows",
             "region": "zhenru",
             "snid": "6test12345",
             "state": "active",
             "status": "running",
             "tenant_id": "d40f594067e548148084be98dd48f9ed",
             "update_at": "2016-04-01 11:53:47"
           }
         }


错误返回样例

::


   HTTP/1.1 400 Bad Request
   {
     "msg": "Malformed request URL: URL's project_id 'e58c78fe826f4f0b890767a3e078101' doesn't match Context's project_id 'e58c78fe826f4f0b890767a3e0781019'",
     "code": 400,
     "reason": "Unauthorized"
   }