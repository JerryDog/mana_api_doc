


获取区域与项目
====================

.. toctree::
   :maxdepth: 2
   :numbered:



概要
--------------------

返回有效 Token 的 tenant_id 与 region 列表


API规范
--------------------------

认证服务API入口与API列表如下：


    * API入口: http://m.scloudm.com/
    * API列表:

+------------------+------------------------------+------------+--------------------------------+
|  资源            |  操作                        |  HTTP方法  |  URI路径                       |
+==================+==============================+============+================================+
|  region_tenant   |  获取项目与区域              |  GET       |  /mana_api/region_tenant       |
+------------------+------------------------------+------------+--------------------------------+


认证并生成新令牌(已可用)

+------------+---------------------------+------------------+
|  HTTP方法  |  URI路径                  |  描述            |
+============+===========================+==================+
|  GET       |  /mana_api/region_tenant  |  获取项目与区域  |
+------------+---------------------------+------------------+

请求参数

+-----------------------+----------+-------------------+
|  字段名               |  类型    |  描述             |
+=======================+==========+===================+
|  token                |  string  |  有效的 token     |
+-----------------------+----------+-------------------+

请求样例

::

    
    curl -i \
         -X POST http://m.scloudm.com/mana_api/region_tenant \
         -H 'X-Auth-Token: {token_id}' \


返回参数

+-------------------+-------------+----------------------+
|  字段名           |  类型       |  描述                |
+===================+=============+======================+
|  tenants          |  array      |  包含了项目列表      |
+-------------------+-------------+----------------------+
|  id               |  string     |  项目ID              |
+-------------------+-------------+----------------------+
|  name             |  string     |  项目名称            |
+-------------------+-------------+----------------------+
|  description      |  string     |  项目描述信息        |
+-------------------+-------------+----------------------+
|  enabled          |  bool       |  项目启用状态        |
+-------------------+-------------+----------------------+
|  regions          |  array      |  区域列表            |
+-------------------+-------------+----------------------+


返回样例

::

    HTTP/1.0 200 OK
    
    {
       "tenants": [
           {
               "id": "1234",
               "name": "ACME Corp",
               "description": "A description ...",
               "enabled": true
           },
           {
               "id": "3456",
               "name": "Iron Works",
               "description": "A description ...",
               "enabled": true
           }
        ],
       "tenants_links": [],
       "regions": ["beijing", "zhenru"]
   }



错误返回样例

::

   HTTP/1.1 400 Bad Request

   {
     "msg": "The request you have made requires authentication.",
     "code": 400
   }